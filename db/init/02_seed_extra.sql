-- ============================================================================
-- DEPRECATED: Этот файл устарел
-- ============================================================================
-- Все данные из этого файла были объединены в основной init-скрипт:
--   db/init/01_init.sql
--
-- Этот файл оставлен для обратной совместимости, но больше не используется.
-- Для новой установки используйте только 01_init.sql.
-- ============================================================================
--
-- Дополнительные категории и блюда для dev-среды
-- Можно запускать повторно: используется ON CONFLICT DO NOTHING

INSERT INTO ref_dish_categories (id, parent_id, level, code, name, description, is_active, sort_order, created_at, updated_at)
VALUES
  (142, NULL, 1, 'brunch_tapas', 'Бранчи и тапас', NULL, TRUE, 130, now(), now()),
  (143, 142, 2, 'brunch.tostadas', 'Тосты и тостады', NULL, TRUE, 10, now(), now()),
  (144, 143, 3, 'brunch.tostadas.avocado', 'Тосты с авокадо', NULL, TRUE, 10, now(), now()),
  (145, 143, 3, 'brunch.tostadas.salmon', 'Тосты с лососем', NULL, TRUE, 20, now(), now()),
  (146, NULL, 1, 'asian_wok_fusion', 'Азиатский фьюжн', NULL, TRUE, 140, now(), now()),
  (147, 146, 2, 'asian.wok.noodles', 'Воки и лапша', NULL, TRUE, 10, now(), now()),
  (148, 147, 3, 'asian.wok.spicy', 'Острые воки', NULL, TRUE, 10, now(), now()),
  (149, NULL, 1, 'bowls_protein', 'Протеиновые боулы', NULL, TRUE, 150, now(), now()),
  (150, 149, 2, 'bowls.protein.chicken', 'Боулы с курицей', NULL, TRUE, 10, now(), now()),
  (151, 150, 3, 'bowls.protein.teriyaki', 'Боул терияки', NULL, TRUE, 10, now(), now()),
  (152, NULL, 1, 'desserts.modern', 'Современные десерты', NULL, TRUE, 160, now(), now()),
  (153, 152, 2, 'desserts.modern.mousse', 'Муссовые десерты', NULL, TRUE, 10, now(), now()),
  (154, 153, 3, 'desserts.modern.pistachio', 'Фисташковые муссы', NULL, TRUE, 10, now(), now())
ON CONFLICT (id) DO NOTHING;

INSERT INTO menu_items (id, restaurant_id, name, description, price, currency, is_active, is_available, image_url, created_at, updated_at, listing_mode, ref_category_id, is_brand_anonymous, base_price, discount_percent, discount_fixed, composition)
VALUES
  (10, 3, 'Тост с авокадо и микрозеленью', 'Хрустящий тост с кремом из авокадо и микрозеленью.', 320.00, 'RUB', TRUE, TRUE, NULL, now(), now(), 0, 144, FALSE, NULL, NULL, NULL, 'Хрустящий тост с кремом из авокадо и микрозеленью.'),
  (11, 3, 'Тост с лососем и крем-чиз', 'Подкопчённый лосось, крем-чиз и огурец на зерновом хлебе.', 450.00, 'RUB', TRUE, TRUE, 'https://images.unsplash.com/photo-1540189549336-e6e99c3679fe', now(), now(), 0, 145, FALSE, NULL, 15.00, NULL, 'Подкопчённый лосось, крем-чиз и огурец на зерновом хлебе.'),
  (12, 3, 'Острый вок с креветкой', 'Пшеничная лапша, креветки, острый соус чили и овощи.', 520.00, 'RUB', TRUE, TRUE, 'https://images.unsplash.com/photo-1559057194-95f0d7b7d7c7', now(), now(), 0, 148, FALSE, NULL, 12.00, NULL, 'Пшеничная лапша, креветки, острый соус чили и овощи.'),
  (13, 3, 'Терияки боул с курицей', 'Тёплый рис, курица терияки, эдамаме и кунжут.', 480.00, 'RUB', TRUE, TRUE, 'https://images.unsplash.com/photo-1529006557810-274b9b2fc783', now(), now(), 0, 151, FALSE, NULL, 8.00, NULL, 'Тёплый рис, курица терияки, эдамаме и кунжут.'),
  (14, 3, 'Фисташковый мусс', 'Воздушный мусс с фисташковой пастой и белым шоколадом.', 260.00, 'RUB', TRUE, TRUE, NULL, now(), now(), 0, 154, FALSE, NULL, NULL, NULL, 'Воздушный мусс с фисташковой пастой и белым шоколадом.'),
  (15, 3, 'Шаурма по-домашнему', 'Сочное мясо, свежие овощи и фирменный соус в лаваше.', 350.00, 'RUB', TRUE, TRUE, NULL, now(), now(), 0, 89, FALSE, NULL, NULL, NULL, 'Сочное мясо, свежие овощи и фирменный соус в лаваше.'),
  -- Новые блюда (20+)
  (16, 3, 'Chicken Teriyaki Bowl', 'Тёплый рис, курица терияки, овощи и кунжутная заправка.', 490.00, 'RUB', TRUE, TRUE, NULL, now(), now(), 0, 151, TRUE, NULL, 10.00, NULL, 'Тёплый рис, курица терияки, овощи и кунжутная заправка.'),
  (17, 3, 'Vegan Buddha Box', 'Киноа, авокадо, овощи на пару, хумус и тахини.', 420.00, 'RUB', TRUE, TRUE, NULL, now(), now(), 0, 56, FALSE, NULL, NULL, NULL, 'Киноа, авокадо, овощи на пару, хумус и тахини.'),
  (18, 3, 'Seafood Lunch Box', 'Лосось, креветки, рис и овощи с соевым соусом.', 580.00, 'RUB', TRUE, TRUE, NULL, now(), now(), 0, 99, TRUE, NULL, 15.00, NULL, 'Лосось, креветки, рис и овощи с соевым соусом.'),
  (19, 3, 'Цезарь с курицей', 'Свежий салат Цезарь с курицей гриль, пармезаном и соусом.', 380.00, 'RUB', TRUE, TRUE, NULL, now(), now(), 0, 53, FALSE, NULL, NULL, NULL, 'Свежий салат Цезарь с курицей гриль, пармезаном и соусом.'),
  (20, 3, 'Поке с тунцом', 'Свежий тунец, рис, авокадо, водоросли и соус понзу.', 520.00, 'RUB', TRUE, TRUE, NULL, now(), now(), 0, 55, FALSE, NULL, 12.00, NULL, 'Свежий тунец, рис, авокадо, водоросли и соус понзу.'),
  (21, 3, 'Борщ украинский', 'Классический борщ с говядиной, сметаной и зеленью.', 320.00, 'RUB', TRUE, TRUE, NULL, now(), now(), 0, 65, TRUE, NULL, NULL, NULL, 'Классический борщ с говядиной, сметаной и зеленью.'),
  (22, 3, 'Том-ям с креветками', 'Острый тайский суп с креветками, кокосовым молоком и лемонграссом.', 450.00, 'RUB', TRUE, TRUE, NULL, now(), now(), 0, 70, FALSE, NULL, 8.00, NULL, 'Острый тайский суп с креветками, кокосовым молоком и лемонграссом.'),
  (23, 3, 'Пицца Маргарита', 'Классическая пицца с томатами, моцареллой и базиликом.', 390.00, 'RUB', TRUE, TRUE, NULL, now(), now(), 0, 74, FALSE, NULL, NULL, NULL, 'Классическая пицца с томатами, моцареллой и базиликом.'),
  (24, 3, 'Пицца Пепперони', 'Острая пицца с пепперони и сыром.', 450.00, 'RUB', TRUE, TRUE, NULL, now(), now(), 0, 75, TRUE, NULL, 10.00, NULL, 'Острая пицца с пепперони и сыром.'),
  (25, 3, 'Чизбургер классический', 'Говяжья котлета, сыр, овощи и фирменный соус.', 420.00, 'RUB', TRUE, TRUE, NULL, now(), now(), 0, 84, FALSE, NULL, NULL, NULL, 'Говяжья котлета, сыр, овощи и фирменный соус.'),
  (26, 3, 'Чикен-бургер', 'Куриная котлета, салат, помидор и майонез.', 380.00, 'RUB', TRUE, TRUE, NULL, now(), now(), 0, 85, FALSE, NULL, 5.00, NULL, 'Куриная котлета, салат, помидор и майонез.'),
  (27, 3, 'Шаурма классическая', 'Мясо, овощи, соус в лаваше.', 320.00, 'RUB', TRUE, TRUE, NULL, now(), now(), 0, 89, TRUE, NULL, NULL, NULL, 'Мясо, овощи, соус в лаваше.'),
  (28, 3, 'Стейк из говядины', 'Сочный стейк средней прожарки с овощами гриль.', 890.00, 'RUB', TRUE, TRUE, NULL, now(), now(), 0, 95, FALSE, NULL, 15.00, NULL, 'Сочный стейк средней прожарки с овощами гриль.'),
  (29, 3, 'Куриные крылышки BBQ', 'Хрустящие крылышки в соусе барбекю.', 350.00, 'RUB', TRUE, TRUE, NULL, now(), now(), 0, 97, FALSE, NULL, NULL, NULL, 'Хрустящие крылышки в соусе барбекю.'),
  (30, 3, 'Лосось на гриле', 'Филе лосося с овощами и лимоном.', 650.00, 'RUB', TRUE, TRUE, NULL, now(), now(), 0, 98, TRUE, NULL, 12.00, NULL, 'Филе лосося с овощами и лимоном.'),
  (31, 3, 'Карбонара', 'Паста с беконом, яйцом и пармезаном.', 480.00, 'RUB', TRUE, TRUE, NULL, now(), now(), 0, 106, FALSE, NULL, NULL, NULL, 'Паста с беконом, яйцом и пармезаном.'),
  (32, 3, 'Паста с морепродуктами', 'Спагетти с креветками, мидиями и томатным соусом.', 520.00, 'RUB', TRUE, TRUE, NULL, now(), now(), 0, 108, FALSE, NULL, 8.00, NULL, 'Спагетти с креветками, мидиями и томатным соусом.'),
  (33, 3, 'Пад Тай с курицей', 'Тайская лапша с курицей, яйцом и овощами.', 450.00, 'RUB', TRUE, TRUE, NULL, now(), now(), 0, 111, TRUE, NULL, NULL, NULL, 'Тайская лапша с курицей, яйцом и овощами.'),
  (34, 3, 'Ризотто с грибами', 'Кремовое ризотто с белыми грибами и пармезаном.', 420.00, 'RUB', TRUE, TRUE, NULL, now(), now(), 0, 112, FALSE, NULL, NULL, NULL, 'Кремовое ризотто с белыми грибами и пармезаном.'),
  (35, 3, 'Чизкейк Нью-Йорк', 'Классический чизкейк с ягодным соусом.', 320.00, 'RUB', TRUE, TRUE, NULL, now(), now(), 0, 117, FALSE, NULL, 10.00, NULL, 'Классический чизкейк с ягодным соусом.'),
  (36, 3, 'Тирамису', 'Итальянский десерт с кофе и маскарпоне.', 280.00, 'RUB', TRUE, TRUE, NULL, now(), now(), 0, 119, FALSE, NULL, NULL, NULL, 'Итальянский десерт с кофе и маскарпоне.'),
  (37, 3, 'Лате классический', 'Эспрессо с молоком и молочной пеной.', 180.00, 'RUB', TRUE, TRUE, NULL, now(), now(), 0, 127, TRUE, NULL, NULL, NULL, 'Эспрессо с молоком и молочной пеной.'),
  (38, 3, 'Капучино', 'Эспрессо с молоком и воздушной пеной.', 170.00, 'RUB', TRUE, TRUE, NULL, now(), now(), 0, 127, FALSE, NULL, NULL, NULL, 'Эспрессо с молоком и воздушной пеной.'),
  (39, 3, 'Смузи ягодный', 'Смесь ягод, банан и йогурт.', 250.00, 'RUB', TRUE, TRUE, NULL, now(), now(), 0, 133, FALSE, NULL, 5.00, NULL, 'Смесь ягод, банан и йогурт.'),
  (40, 3, 'Бизнес-ланч', 'Суп, второе блюдо, салат и напиток.', 450.00, 'RUB', TRUE, TRUE, NULL, now(), now(), 0, 138, TRUE, NULL, 20.00, NULL, 'Суп, второе блюдо, салат и напиток.')
ON CONFLICT (id) DO NOTHING;

-- поправим последовательность, чтобы будущие вставки не конфликтовали
SELECT setval('public.menu_items_id_seq', GREATEST((SELECT COALESCE(MAX(id), 1) FROM menu_items), nextval('public.menu_items_id_seq')), true);
SELECT setval('public.ref_dish_categories_id_seq', GREATEST((SELECT COALESCE(MAX(id), 1) FROM ref_dish_categories), nextval('public.ref_dish_categories_id_seq')), true);

